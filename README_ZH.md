# Server Market

[English](./README.md)

ä¸º Minecraft æœåŠ¡å™¨æä¾›å®Œæ•´çš„ç©å®¶ç»æµä¸ç‰©å“äº¤æ˜“å¸‚åœºç³»ç»Ÿã€‚

## åŠŸèƒ½ç‰¹æ€§

- ğŸ’° **ç©å®¶ç»æµ** - ä½™é¢ç³»ç»Ÿï¼Œæ”¯æŒè½¬è´¦å’Œäº¤æ˜“
- ğŸ›’ **åŒé‡å¸‚åœº** - ç©å®¶å•†åº—ï¼ˆæœ‰é™åº“å­˜ï¼‰+ ç³»ç»Ÿå•†åº—ï¼ˆæ— é™åº“å­˜ï¼Œç®¡ç†å‘˜å®šä¹‰ï¼‰
- ğŸ“¥ **æ”¶è´­ç³»ç»Ÿ** - ç©å®¶å’Œç®¡ç†å‘˜å¯è®¾ç½®æ”¶è´­è®¢å•ï¼Œå…¶ä»–ç©å®¶å¯å‡ºå”®ç‰©å“æ¢é’±
- ğŸ“¦ **å¿«é€’é©¿ç«™** - æ”¶è´­çš„ç‰©å“ä¼šé€åˆ°ä¸“å±å¿«é€’é©¿ç«™ï¼Œå®‰å…¨é¢†å–
- ğŸ” **æ™ºèƒ½è´­ç‰©** - è‡ªåŠ¨åŒ¹é…å…¨æœæœ€ä½ä»·
- ğŸ–¥ï¸ **å›¾å½¢ç•Œé¢** - ä¾¿æ·çš„èœå•æµè§ˆã€è´­ä¹°å’Œå‡ºå”®ç³»ç»Ÿ
- ğŸ’µ **å®ç‰©è´§å¸** - å¯é€‰çš„ç‰©å“è´§å¸ç³»ç»Ÿ
- ğŸ—„ï¸ **çµæ´»å­˜å‚¨** - SQLiteï¼ˆé»˜è®¤ï¼‰æˆ– MySQLï¼Œæ”¯æŒ XConomy

## å¿«é€Ÿå¼€å§‹

### ç©å®¶å‘½ä»¤

```bash
/svm money                           # æŸ¥è¯¢ä½™é¢
/svm buy <æ•°é‡> <ç‰©å“> [å–å®¶]         # è´­ä¹°ç‰©å“
/svm sell <æ•°é‡>                     # ä¸Šæ¶ç‰©å“
/svm menu                            # æ‰“å¼€ GUIï¼ˆå¯åœ¨æ­¤è®¿é—®å¿«é€’é©¿ç«™ï¼‰
/svm menu                            # æ‰“å¼€ GUI
/svm purchase <ä»·æ ¼> <æ•°é‡>           # è®¾ç½®æ”¶è´­è®¢å•ï¼ˆæ‰‹æŒç‰©å“ï¼‰
/svm selltopurchase <æ•°é‡>            # å‘æ”¶è´­è€…å‡ºå”®ï¼ˆæ‰‹æŒç‰©å“ï¼‰
```
**å¿«é€’é©¿ç«™ä½¿ç”¨æ–¹æ³•ï¼š**
- å½“æœ‰äººå‘ä½ çš„æ”¶è´­è®¢å•å‡ºå”®ç‰©å“æ—¶ï¼Œç‰©å“ä¼šè‡ªåŠ¨å‘é€åˆ°ä½ çš„å¿«é€’é©¿ç«™
- æ‰“å¼€ `/svm menu` ç‚¹å‡»"å¿«é€’é©¿ç«™"æŒ‰é’®ï¼ˆç®±å­çŸ¿è½¦å›¾æ ‡ï¼‰
- ç›¸åŒçš„ç‰©å“ä¼šè‡ªåŠ¨åˆå¹¶æ˜¾ç¤ºæ€»æ•°é‡
- ç‚¹å‡»ä»»æ„åŒ…è£¹å³å¯é¢†å–è¯¥ç‰©å“çš„æ‰€æœ‰æ•°é‡åˆ°èƒŒåŒ…
- ä¸»é¡µä¼šæ˜¾ç¤ºä½ æœ‰å¤šå°‘ä¸ªå¾…é¢†å–çš„åŒ…è£¹


### ç®¡ç†å‘˜å‘½ä»¤

```bash
/svm edit set <ç©å®¶> <é‡‘é¢>           # è®¾ç½®ç©å®¶ä½™é¢
/svm edit price <ä»·æ ¼> [é™è´­]         # è®¾ç½®ç³»ç»Ÿå•†åº—ä»·æ ¼
/svm edit cash <é¢å€¼>                # é…ç½®è´§å¸ç‰©å“
/svm edit purchase <ä»·æ ¼> [é™é¢]      # è®¾ç½®ç³»ç»Ÿæ”¶è´­ï¼ˆæ‰‹æŒç‰©å“ï¼‰
/svm edit reload                     # é‡è½½é…ç½®
```

## å®‰è£…æ–¹æ³•

1. ä¸‹è½½æ¨¡ç»„ JAR æ–‡ä»¶
2. **ä¸‹è½½ [Fabric Permissions API](https://modrinth.com/mod/fabric-permissions-api)**ï¼ˆå¿…éœ€ä¾èµ–ï¼‰
3. å°†ä¸¤ä¸ª JAR æ–‡ä»¶éƒ½æ”¾å…¥æœåŠ¡å™¨çš„ `mods` æ–‡ä»¶å¤¹
4. å¯åŠ¨æœåŠ¡å™¨ - é…ç½®æ–‡ä»¶ä¼šè‡ªåŠ¨ç”Ÿæˆåœ¨ `config/server-market/config.properties`
5. ï¼ˆå¯é€‰ï¼‰å®‰è£… [LuckPerms](https://luckperms.net/) ä»¥ä½¿ç”¨é«˜çº§æƒé™ç®¡ç†

**æ³¨æ„ï¼š** Fabric Permissions API æ˜¯å¿…éœ€çš„ä¾èµ–é¡¹ã€‚è¯·ç¡®ä¿ä¸‹è½½æ­£ç¡®çš„ç‰ˆæœ¬ï¼š
- Minecraft 1.21.6 åŠä»¥ä¸Šç‰ˆæœ¬ï¼šä½¿ç”¨ fabric-permissions-api v0.4.0 æˆ–æ›´é«˜ç‰ˆæœ¬
- Minecraft 1.21.5 åŠä»¥ä¸‹ç‰ˆæœ¬ï¼šä½¿ç”¨ fabric-permissions-api v0.3.3

## æ•°æ®åº“è®¾ç½®

**SQLiteï¼ˆé»˜è®¤ï¼‰** - æ— éœ€é…ç½®ï¼Œå¼€ç®±å³ç”¨ã€‚

**MySQL** - ç¼–è¾‘ `config/server-market/config.properties`ï¼š

```properties
storage_type = mysql
mysql_host = localhost
mysql_port = 3306
mysql_database = server_market
mysql_user = ç”¨æˆ·å
mysql_password = å¯†ç 
```

**XConomy å…¼å®¹** - ä½¿ç”¨ MySQL æ—¶ï¼Œæœ¬æ¨¡ç»„å¯ä¸è¿è¡Œ XConomy çš„ Paper æœåŠ¡å™¨å…±äº«ä½™é¢ã€‚åªéœ€å°†ä¸¤ä¸ªæœåŠ¡å™¨æŒ‡å‘åŒä¸€ä¸ªæ•°æ®åº“ã€‚

## æƒé™é…ç½®

æœ¬æ¨¡ç»„ä½¿ç”¨ Fabric Permissions APIï¼Œæ”¯æŒ LuckPermsã€‚

**å¿«é€Ÿè®¾ç½®ï¼ˆLuckPermsï¼‰ï¼š**
```bash
# æˆäºˆæ‰€æœ‰ç©å®¶å‘½ä»¤
/lp group default permission set servermarket.command.* true

# æˆäºˆæ‰€æœ‰ç®¡ç†å‘˜å‘½ä»¤
/lp group admin permission set servermarket.admin.* true
```

**å›é€€æ–¹æ¡ˆï¼š** æ²¡æœ‰æƒé™æ’ä»¶æ—¶ï¼Œæ‰€æœ‰ç©å®¶å¯ä½¿ç”¨ç©å®¶å‘½ä»¤ï¼Œç®¡ç†å‘˜å‘½ä»¤éœ€è¦ OP ç­‰çº§ 4ã€‚

## é…ç½®é€‰é¡¹

`config/server-market/config.properties` ä¸­çš„å…³é”®è®¾ç½®ï¼š

- `initial_player_balance` - æ–°ç©å®¶åˆå§‹ä½™é¢
- `enable_tax` / `market_tax_rate` - å¸‚åœºäº¤æ˜“ç¨
- `storage_type` - æ•°æ®åº“ç±»å‹ï¼ˆsqlite/mysqlï¼‰
- `language` - é»˜è®¤è¯­è¨€ï¼ˆen/zhï¼‰

æ—§å‘½ä»¤å¦‚ `/mbuy`ã€`/mpay`ã€`/mset` å·²è¢«ç»Ÿä¸€çš„ `/svm` å‘½ä»¤ç³»ç»Ÿå–ä»£ã€‚

## è®¸å¯è¯

å‚è§ [LICENSE.txt](./LICENSE.txt)

